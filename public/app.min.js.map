{"version":3,"sources":["webpack:///webpack/bootstrap 4ae7b10872c6a0785942","webpack:///./app/app.js"],"names":["__webpack_require__","moduleId","installedModules","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","onSubmit","event","preventDefault","document","querySelector","innerHTML","classList","remove","formatedChain","chain","replace","escapeInvalidChar","stripTags","value","add","input","callback","xhttp","XMLHttpRequest","onreadystatechange","this","readyState","status","JSON","parse","responseText","open","send","provider","displayResults","onClickInput","onBlurInput","response","packagedBoxes","setTimeout","boxes","interval","setInterval","boxe","textnode","createTextNode","node","createElement","appendChild","length","clearInterval","displayBoxesAnimation","join","count","addEventListener"],"mappings":"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","file":"app.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4ae7b10872c6a0785942","(function () {\n    'use strict';\n\n    document.addEventListener('DOMContentLoaded', initListeners, false);\n\n    /**\n     * Init Event listeners of page\n     */\n    function initListeners () {\n        document.querySelector(\"input[name='chain']\").addEventListener('click', onClickInput);\n        document.querySelector(\"input[name='chain']\").addEventListener('blur', onBlurInput);\n        document.querySelector('form').addEventListener('submit', onSubmit);\n    }\n\n    /**\n     * Event listener callback of Submit action :\n     * reset screen AND\n     * call API with formated chain AND\n     * display Boxes and result OR\n     * display Error message\n     * @param {Object} event\n     */\n    function onSubmit (event) {\n        event.preventDefault();\n        resetResultsDisplay();\n        const formatedChain = getInputValue();\n        if (formatedChain === '') {\n            document.querySelector('.label-error').classList.add('visible');\n        } else {\n            document.querySelector('.label-error').classList.remove('visible');\n            document.querySelector('.label-action').classList.remove('visible');\n            provider(formatedChain, displayResults);\n        }\n    }\n\n    /**\n     * Event listener callback of Click input action :\n     * display label message\n     */\n    function onClickInput () {\n        document.querySelector('.label-action').classList.add('visible');\n    }\n\n    /**\n     * Event listener callback of Click input action :\n     * Hide label message\n     */\n    function onBlurInput () {\n        document.querySelector('.label-action').classList.remove('visible');\n    }\n\n    /**\n     * Event listener callback of Click input action :\n     * display boxes animation and results OR\n     * display error\n     * @param {object}\n     */\n    function displayResults (response) {\n        if (!response && response.packagedBoxes) {\n            document.querySelector('.api-error').classList.add('visible');\n            setTimeout(() => {\n                document.querySelector('.api-error').classList.remove('visible');\n            }, 3000);\n        } else {\n            displayBoxesAnimation(response.packagedBoxes);\n            setTimeout(() => {\n                document.querySelector('.label-result').innerHTML = response.packagedBoxes.join('/') + '      boxe count: ' + response.count;\n                document.querySelector('.label-result').classList.add('visible');\n            }, 3000);\n        }\n    }\n\n    /**\n     * hide previous boxes and results\n     */\n    function resetResultsDisplay () {\n        document.querySelector('.flex-container').innerHTML = '';\n        document.querySelector('.label-result').innerHTML = '';\n        document.querySelector('.label-result').classList.remove('visible');\n    }\n\n    /**\n     * Display each boxe value in html boxe every 300ms\n     * @param {Array<String>} boxes\n     */\n    function displayBoxesAnimation (boxes) {\n        let i = 0;\n        const interval = setInterval(() => {\n            const boxe = boxes[i];\n            const textnode = document.createTextNode(boxe);\n            let node = document.createElement('LI');\n            node.appendChild(textnode);\n            document.querySelector('.flex-container').appendChild(node);\n            i++;\n            if (i === boxes.length) clearInterval(interval);\n        }, 300);\n    }\n\n    /**\n     * call XspeedIt API packager to get packaged boxes with items\n     * @param {String} input\n     * @param {Function} callback\n     */\n    function provider (input, callback) {\n        var xhttp = new XMLHttpRequest(); // eslint-disable-line no-undef\n        xhttp.onreadystatechange = function () {\n            if (this.readyState === 4 && (this.status === 200 || this.status === 304)) {\n                callback(JSON.parse(this.responseText));\n            } else if (this.readyState === 4 && (this.status !== 200 || this.status !== 304)) {\n                callback(false); // eslint-disable-line standard/no-callback-literal\n            }\n        };\n        xhttp.open('GET', '/packager/' + input, true);\n        xhttp.send();\n    }\n\n    /**\n     * get dom input value\n     */\n    function getInputValue () {\n        const OriginalString = document.querySelector(\"input[name='chain']\").value;\n        return escapeInvalidChar(stripTags(OriginalString));\n    }\n\n    /**\n     * escape HTML tags\n     * @param {String} chain\n     */\n    function stripTags (chain) {\n        return chain.replace(/(<([^>]+)>)/ig, '');\n    }\n\n    /**\n     * escape all char excepted number from 1 to 9\n     * @param {String} chain\n     */\n    function escapeInvalidChar (chain) {\n        return chain.replace(/([^1-9]+)/g, '');\n    }\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./app/app.js"],"sourceRoot":""}